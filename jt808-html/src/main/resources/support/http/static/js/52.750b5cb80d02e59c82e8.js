webpackJsonp([52],{iKar:function(t,e){},yZoQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mvHQ"),i=s.n(n),o={name:"WebSocketHexString",data:function(){return{wsurl:"",text:"",list:[],websocket:null}},methods:{settext:function(){if(null!=this.websocket){var t={cmd:"1004",text:this.text};this.websocketsend(t)}},connect:function(){console.log(this.wsurl),this.init()},close:function(){this.lgxInfo("正在断开服务器连接。"),this.websocket.close(),this.websocket=null},clear:function(){this.list=[]},init:function(){null==this.websocket?(this.websocket=new WebSocket(this.wsurl),this.websocket.onmessage=this.websocketonmessage,this.websocket.onopen=this.websocketonopen,this.websocket.onerror=this.websocketonerror,this.websocket.onclose=this.websocketclose):this.lgxInfo2("已连接服务器，不可重复连接。")},websocketonopen:function(){var t={cmd:"1003",text:this.text};this.websocketsend(t)},websocketonmessage:function(t){var e=JSON.parse(t.data);this.list.unshift(e)},websocketsend:function(t){this.websocket.send(i()(t))},websocketclose:function(t){console.log("断开连接",t),this.list.unshift({time:"",hexstring:"已断开服务器连接。"})},formatDatetime:function(t,e,s,n){return s?s.substring(0,4)+"-"+s.substring(4,6)+"-"+s.substring(6,8)+" "+s.substring(8,10)+":"+s.substring(10,12)+":"+s.substring(12,14):""}},mounted:function(){var t=this;this.callApi({apicode:1102},function(e){t.wsurl=e.data.websocket0x0200URL})},destroyed:function(){this.websocket.close()}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{margin:"5px"}},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"small"}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"过滤设备号"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.settext}},[t._v("设置设备号")]),t._v(" "),s("el-button",{attrs:{type:"info",plain:""},on:{click:t.clear}},[t._v("清空数据")]),t._v(" "),s("el-button",{attrs:{type:"success"},on:{click:t.connect}},[t._v("连接服务器")]),t._v(" "),s("el-button",{attrs:{type:"warning"},on:{click:t.close}},[t._v("断开服务器")])],1)],1),t._v(" "),s("div",[s("table",{attrs:{width:"100%",border:"0",cellSpacing:"0",cellPadding:"0"}},t._l(t.list,function(e,n){return s("tr",{key:n,class:{clsf9f9f91:n%2==1}},[t._m(0,!0),t._v(" "),s("td",{staticStyle:{width:"160px"},attrs:{width:"160px"}},[s("div",{staticStyle:{width:"160px"}},[t._v("\n      "+t._s(t.formatDatetime(0,0,e.time))+"\n      ")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("\n       "+t._s(e.hexstring)+"\n    ")])])}),0)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{width:"10px"}},[e("div",{staticStyle:{width:"10px"}})])}]};var l=s("VU/8")(o,c,!1,function(t){s("iKar")},"data-v-1cdb89c2",null);e.default=l.exports}});