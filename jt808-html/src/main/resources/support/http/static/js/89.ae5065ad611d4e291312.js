webpackJsonp([89],{"4atH":function(e,t){},Anv1:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"TravelStatistics",data:function(){return{value2:"",tids:[],fields:[{name:"终端ID",code:"tid"},{name:"车牌号码",code:"carno"},{name:"隶属车队",code:"group"}],pickerOptions:{disabledDate:function(e){return(new Date).format("yyyyMMdd")<e.format("yyyyMMdd")},shortcuts:[{text:"最近一天",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-864e5),e.$emit("pick",[i,t])}},{text:"最近三天",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e5),e.$emit("pick",[i,t])}},{text:"最近七天",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近十五天",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-1296e6),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setMonth(i.getMonth()-1),e.$emit("pick",[i,t])}}]},tableData:[]}},methods:{excel:function(){!function(e,t,i){for(var a="",n="",r=0;r<e.length;r++)e[r].title&&(n+=e[r].title+",");n=n.slice(0,-1),a+=n+"\r\n";for(var r=0;r<t.length;r++){for(var n="",c=0;c<e.length;c++)e[c].title&&(e[c].formater||(e[c].formater=l),n+='"'+e[c].formater("","",t[r][e[c].field]?t[r][e[c].field]:"0")+'"\t,');n.slice(0,n.length-1),a+=n+"\r\n"}if(""==a)return void alert("Invalid data");var i=i,o=new Blob(["\ufeff"+a],{type:"text/csv"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,i+".csv");else{var s=document.createElement("a");s.href=URL.createObjectURL(o),s.style="visibility:hidden",s.download=i+".csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}([{title:"车牌号码",field:"carno"},{title:"隶属车队",field:"group"},{title:"终端ID",field:"id"},{title:"行驶次数",field:"cs"},{title:"行驶里程KM",field:"lc"},{title:"行驶时间",field:"time"},{title:"最高时速KM",field:"speed"}],this.tableData,"行程统计")},searchGrid:function(){if(0!=this.tids.length)if(this.value2){var e=this;this.callApi({apicode:1126,tids:this.tids,stime:this.value2[0],etime:this.value2[1]},function(t){e.tableData=t.data})}else this.lgxInfo2("操作失败，日期不可为空!");else this.lgxInfo2("操作失败，请选择要统计的车辆!")},lingxcheckchange:function(e,t){if(t)(e.id+"").indexOf("_")>0&&this.tids.push(e.value+"");else{for(var i=-1,a=0;a<this.tids.length;a++)if(e.value==this.tids[a]){i=a;break}i>=0&&this.tids.splice(i,1)}},lingxnodeclick:function(e){}},mounted:function(){},components:{LingxCarTree:i("Zwc7").a}};function l(e,t,i){return i}var n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"100%"}},[i("el-container",{staticStyle:{height:"100%"}},[i("el-aside",{staticStyle:{"background-color":"#fff","border-right":"#c1c5cd 1px solid"},attrs:{width:"300px"}},[i("LingxCarTree",{ref:"lingxCarTree",on:{lingxcheckchange:e.lingxcheckchange,lingxnodeclick:e.lingxnodeclick}})],1),e._v(" "),i("el-container",{staticStyle:{width:"100%",height:"100%",margin:"0px",padding:"0px"}},[i("el-header",{staticStyle:{padding:"0px"},attrs:{height:"42"}},[i("div",{staticStyle:{margin:"5px"}},[i("span",[i("el-date-picker",{attrs:{size:"small","value-format":"timestamp",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),e._v(" "),i("el-button",{staticStyle:{padding:"10px 15px 8px 15px"},attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-search"},on:{click:e.searchGrid}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-notebook-2",size:"small",type:"success",plain:""},on:{click:e.excel}},[e._v("导出")])],1)]),e._v(" "),i("el-main",{staticStyle:{margin:"0px",padding:"0px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","highlight-current-row":"",size:"mini",height:"100%"}},[i("el-table-column",{attrs:{label:"",width:"42px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n               "+e._s(t.$index+1)+"\n           ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"tid",label:"终端ID",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"carno",label:"车牌号码",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"group",label:"隶属车队",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"cs",label:"行驶次数",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"lc",label:"行驶里程KM",width:"160"}}),e._v(" "),i("el-table-column",{attrs:{prop:"time",label:"行驶时间",width:"160"}}),e._v(" "),i("el-table-column",{attrs:{prop:"speed",label:"最高时速KM",width:"160"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")(a,n,!1,function(e){i("4atH")},null,null);t.default=r.exports}});