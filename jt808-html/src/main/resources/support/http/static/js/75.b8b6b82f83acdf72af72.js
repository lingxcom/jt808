webpackJsonp([75],{JbVm:function(e,t){},SmoL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("mvHQ"),o=i.n(l),n={name:"LingxEditorQuerySetting",data:function(){return{ecode:"",id:"",prop:"",cindex:0,querys:[{field:"cx_name",name:"名称_示例",editor:"textfield",where:" and name like '%${cx_name}%' "}],dialogVisible:!1,form:{}}},methods:{openDialog:function(e){this.querys=[{field:"cx_name",name:"名称_示例",editor:"textfield",where:" and name like '%${cx_name}%' "}],this.ecode=e.ecode,this.id=e.id,this.prop=e.prop,e.value&&"["==e.value.charAt(0)&&(this.querys=JSON.parse(e.value)),this.form=this.querys[this.cindex],this.dialogVisible=!0},dialogSubmit:function(){var e=this,t=o()(this.querys);this.callApi({apicode:9008,code:this.ecode,id:this.id,prop:this.prop,value:t},function(t){e.lgxInfo(t.message),1==t.code&&(e.dialogVisible=!1)})},removeField:function(e){this.querys.splice(e,1),this.setIndex(0)},setIndex:function(e){this.cindex=e,this.form=this.querys[e]},addField:function(){this.querys.push({field:"cx_name",name:"名称_示例",editor:"textfield",where:" and name like '%${cx_name}%' "}),this.form=this.querys[this.querys.length-1]},swapItems:function(e){var t=e-1;if(!(t<0)){var i=this.querys;i[e]=i.splice(t,1,i[e])[0]}}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"查询设置",visible:e.dialogVisible,width:"720px",height:"480px","close-on-click-modal":!1,"show-close":!0,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticStyle:{height:"420px",overflow:"auto"}},[i("el-row",[i("el-col",{staticStyle:{padding:"0px"},attrs:{span:8}},[i("ul",[e._l(e.querys,function(t,l){return i("li",{staticStyle:{"list-style-type":"none",height:"42px","line-height":"42px"}},[i("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"success",underline:!1},on:{click:function(t){return e.swapItems(l)}}},[e._v("上移")]),e._v(" "),e.cindex!=l?i("el-button",{staticStyle:{width:"140px"},attrs:{size:"small"},on:{click:function(t){return e.setIndex(l)}}},[e._v(e._s(l+1)+". "+e._s(t.name)+" ["+e._s(t.field)+"]")]):e._e(),e._v(" "),e.cindex==l?i("el-button",{staticStyle:{width:"140px"},attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return e.setIndex(l)}}},[e._v(e._s(l+1)+". "+e._s(t.name)+" ["+e._s(t.field)+"]")]):e._e(),e._v(" "),i("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"danger",underline:!1},on:{click:function(t){return e.removeField(l)}}},[e._v("删除")])],1)}),e._v(" "),i("li",{staticStyle:{"list-style-type":"none",height:"42px","line-height":"42px","text-align":"center"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.addField}},[e._v("添加字段")])],1)],2)]),e._v(" "),i("el-col",{staticStyle:{padding:"10px"},attrs:{span:16}},[i("el-form",{ref:"form",attrs:{size:"small",model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"字段代码"}},[i("el-input",{model:{value:e.form.field,callback:function(t){e.$set(e.form,"field",t)},expression:"form.field"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"显示名称"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"输入控件"}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.editor,callback:function(t){e.$set(e.form,"editor",t)},expression:"form.editor"}},[i("el-option",{attrs:{label:"文本输入框",value:"textfield"}}),e._v(" "),i("el-option",{attrs:{label:"日期选择框",value:"datefield"}}),e._v(" "),i("el-option",{attrs:{label:"字典选项框",value:"combobox"}})],1)],1),e._v(" "),"combobox"==e.form.editor?i("el-form-item",{attrs:{label:"字典代码"}},[i("el-input",{model:{value:e.form.optioncode,callback:function(t){e.$set(e.form,"optioncode",t)},expression:"form.optioncode"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"查询语句"}},[i("el-input",{model:{value:e.form.where,callback:function(t){e.$set(e.form,"where",t)},expression:"form.where"}})],1)],1),e._v(" "),i("div",{staticStyle:{"font-size":"14px",color:"#999","line-height":"28px"}},[e._v("\n  说明："),i("br"),e._v("\n  字段代码尽量不要与模型里的属性字段重复，默认以cx_做为前缀。"),i("br"),e._v("\n  当输入控件为日期时，在SQL语句中的日期时间字段，加入时间；例:and etime>'${cx_stime}235959'。"),i("br"),e._v("\n  字典选项框中的字典代码，请到菜单系统字典中查找对应的字典代码。\n\n")])],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("提 交")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)])},staticRenderFns:[]};var a=i("VU/8")(n,s,!1,function(e){i("JbVm")},null,null);t.default=a.exports}});