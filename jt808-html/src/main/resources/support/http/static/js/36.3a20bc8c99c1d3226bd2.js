webpackJsonp([36],{ixmZ:function(e,t){},kzlS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"ProfitReport",data:function(){return{branch_ids:"",sdate:"",edate:"",excelAble:!1,tableData:[],fields:[{name:"网点编号",code:"id"},{name:"网点名称",code:"name"},{name:"总计",code:"total"}]}},methods:{day7:function(){var e=new Date,t=new Date;t.setTime(t.getTime()-6048e5),this.sdate=t.getTime(),this.edate=e.getTime()},day15:function(){var e=new Date,t=new Date;t.setTime(t.getTime()-1296e6),this.sdate=t.getTime(),this.edate=e.getTime()},day30:function(){var e=new Date,t=new Date;t.setMonth(t.getMonth()-1),this.sdate=t.getTime(),this.edate=e.getTime()},searchGrid:function(){if(0!=this.branch_ids.length||0!=this.branch_ids.length)if(this.sdate&&this.edate){var e=this;this.fields=[{name:"网点编号",code:"id"},{name:"网点名称",code:"name"}];for(var t=new Date(this.sdate),a=new Date(this.edate);t.getTime()<a.getTime();){var i=t.format("MM-dd");this.fields.push({name:i,code:i}),t.setDate(t.getDate()+1)}this.fields.push({name:"总计",code:"total"}),this.callApi({apicode:1807,branch_ids:this.branch_ids,stime:this.sdate,etime:this.edate},function(t){e.excelAble=!0,e.tableData=t.data})}else this.lgxInfo2("操作失败，日期不可为空!");else this.lgxInfo2("操作失败，请选择要统计的网点!")},excel:function(){for(var e=[{title:"网点编号",field:"id"},{title:"网点名称",field:"name"}],t=new Date(this.sdate),a=new Date(this.edate);t.getTime()<a.getTime();){var i=t.format("MM-dd");e.push({title:i,field:i}),t.setDate(t.getDate()+1)}e.push({title:"总计",field:"total"}),function(e,t,a){for(var i="",l="",s=0;s<e.length;s++)e[s].title&&(l+=e[s].title+",");l=l.slice(0,-1),i+=l+"\r\n";for(var s=0;s<t.length;s++){for(var l="",d=0;d<e.length;d++)e[d].title&&(e[d].formater||(e[d].formater=n),l+='"'+e[d].formater("","",t[s][e[d].field]?t[s][e[d].field]:"0")+'"\t,');l.slice(0,l.length-1),i+=l+"\r\n"}if(""==i)return void alert("Invalid data");var a=a,r=new Blob(["\ufeff"+i],{type:"text/csv"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,a+".csv");else{var c=document.createElement("a");c.href=URL.createObjectURL(r),c.style="visibility:hidden",c.download=a+".csv",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}(e,this.tableData,"营业额按天统计")}},components:{LingxGridDialog2:a("n4Gv").default}};function n(e,t,a){return a}var l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{width:"100%",height:"100%",margin:"0px",padding:"0px"}},[a("el-header",{staticStyle:{padding:"0px"},attrs:{height:"42"}},[a("div",{staticStyle:{margin:"5px"}},[a("div",{staticStyle:{width:"240px",display:"inline-block"}},[a("LingxGridDialog2",{attrs:{ecode:"tsh_branch",size:"small"},model:{value:e.branch_ids,callback:function(t){e.branch_ids=t},expression:"branch_ids"}})],1),e._v(" "),a("span",[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"timestamp",type:"date",size:"small",placeholder:"起始日期"},model:{value:e.sdate,callback:function(t){e.sdate=t},expression:"sdate"}}),e._v(" "),a("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"timestamp",type:"date",size:"small",placeholder:"截止日期"},model:{value:e.edate,callback:function(t){e.edate=t},expression:"edate"}})],1),e._v(" "),a("el-button",{staticStyle:{padding:"10px 15px 8px 15px"},attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-search"},on:{click:e.searchGrid}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{disabled:!e.excelAble,icon:"el-icon-notebook-2",size:"small",type:"success",plain:""},on:{click:e.excel}},[e._v("导出")]),e._v(" "),a("el-button",{staticStyle:{padding:"10px 15px 8px 15px"},attrs:{size:"small",plain:""},on:{click:e.day7}},[e._v("最近7天")]),e._v(" "),a("el-button",{staticStyle:{padding:"10px 15px 8px 15px"},attrs:{size:"small",plain:""},on:{click:e.day15}},[e._v("最近15天")]),e._v(" "),a("el-button",{staticStyle:{padding:"10px 15px 8px 15px"},attrs:{size:"small",plain:""},on:{click:e.day30}},[e._v("最近1个月")])],1)]),e._v(" "),a("el-main",{staticStyle:{margin:"0px",padding:"0px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","highlight-current-row":"",size:"mini",height:"100%"}},[a("el-table-column",{attrs:{label:"",width:"42px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n               "+e._s(t.$index+1)+"\n           ")]}}])}),e._v(" "),e._l(e.fields,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.code,label:e.name}})})],2)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,l,!1,function(e){a("ixmZ")},null,null);t.default=s.exports}});