webpackJsonp([7,65,95],{"64ym":function(e,t){},OJWk:function(e,t){},QyAV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"CmdView",props:{},data:function(){return{seconds:"",type:"",data:{},dialogVisible:!1}},methods:{sendCmd:function(){var e=this;switch(this.type){case"1":if(!this.seconds)return void alert("启动时间不可为空");break;case"2":case"3":break;default:return void alert("请选择控制类型")}this.callApi({apicode:1806,deviceId:this.data.id,type:this.type,param:this.seconds},function(t){e.lgxInfo(t.message)})},openDialog:function(e){this.data=e,this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1}},mounted:function(){},watch:{},components:{}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.dialogVisible?i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"控制指令",visible:e.dialogVisible,width:"720px",height:"480px","show-close":"","append-to-body":"","before-close":e.handleClose}},[i("div",{staticStyle:{width:"100%",height:"380px",overflow:"auto","background-color":"#fff"}},[i("div",{staticStyle:{"margin-left":"10px","line-height":"28px","font-size":"14px"}},[e._v("\n         设备号:"),i("br"),e._v(e._s(e.data.id)),i("br"),e._v("\n         控制类型:"),i("br"),i("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.type=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),i("option",{attrs:{value:"1"}},[e._v("启动设备")]),e._v(" "),i("option",{attrs:{value:"2"}},[e._v("停止设备")]),e._v(" "),i("option",{attrs:{value:"3"}},[e._v("泡泡体验")])]),i("br"),e._v(" "),"1"==e.type?i("div",[e._v("\n           启动时间:"),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.seconds,expression:"seconds"}],staticStyle:{width:"80px"},domProps:{value:e.seconds},on:{input:function(t){t.target.composing||(e.seconds=t.target.value)}}}),e._v("秒\n         ")]):e._e(),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.sendCmd}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("关 闭")])],1)])]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)]):e._e()],1)},staticRenderFns:[]};var o=i("VU/8")(n,a,!1,function(e){i("SuMV")},null,null);t.default=o.exports},SuMV:function(e,t){},l7RN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("vHsN"),a=i("QyAV"),o={name:"ListDevices",data:function(){return{form:{tid:"",name:""},list:[]}},methods:{openCmdView:function(e){this.$refs.CmdView.openDialog(e)},openMapView:function(e){this.$refs.MapView.openDialog(e)},onSubmit:function(){var e=this;this.callApi({apicode:1805,cx_tid:this.form.tid,cx_name:this.form.name},function(t){e.list=t.data})},formatDatetime:function(e,t,i,n){return i?i.substring(0,4)+"-"+i.substring(4,6)+"-"+i.substring(6,8)+" "+i.substring(8,10)+":"+i.substring(10,12)+":"+i.substring(12,14):""},timeString:function(e){var t=e%60,i=e/60%60,n=e/60/60;return n>1?parseInt(n)+"小时"+parseInt(i)+"分钟":i>1?parseInt(i)+"分"+t+"秒":t+"秒"},clear:function(){this.form.tid="",this.form.name="",this.list=[]}},components:{MapView:n.default,CmdView:a.default}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",size:"small"}},[i("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"设备号"}},[i("el-input",{attrs:{placeholder:"设备号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)}},model:{value:e.form.tid,callback:function(t){e.$set(e.form,"tid",t)},expression:"form.tid"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所属网点"}},[i("el-input",{attrs:{placeholder:"所属网点"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),i("el-button",{on:{click:e.clear}},[e._v("清空")])],1)],1),e._v(" "),i("table",{attrs:{width:"100%",border:"0",cellSpacing:"0",cellPadding:"0"}},e._l(e.list,function(t,n){return i("tr",{key:n,class:{clsf9f9f91:n%2==1}},[i("td",{staticStyle:{"line-height":"28px","font-size":"14px"},attrs:{width:"40px",align:"center",valign:"top"}},[e._v(e._s(n+1)+".")]),e._v(" "),i("td",{staticStyle:{width:"360px"},attrs:{width:"360px"}},[i("div",{staticStyle:{width:"360px","line-height":"28px","font-size":"14px","margin-bottom":"5px"}},[e._v("\n      设备号:"+e._s(t.id)),i("br"),e._v("\n      版本号:"+e._s(t.version)),i("br"),e._v("\n      设备状态："),"1"==t.status?i("span",{staticStyle:{color:"green"}},[e._v("空闲")]):e._e(),"2"==t.status?i("span",{staticStyle:{color:"blue"}},[e._v("工作")]):e._e(),"3"==t.status?i("span",{staticStyle:{color:"#999"}},[e._v("离线")]):e._e(),e._v("\n |\n 电池电压:"+e._s(t.DCDY)+"V"),i("br"),e._v("\n卫星信号:"+e._s(t.A31)+"  |\n 通信信号:"+e._s(t.A30)),i("br"),e._v("\n隶属网点:"+e._s(t.branchName)),i("br"),e._v("\n泡泡液工作时间："+e._s(e.timeString(t.use_time))),i("br"),e._v("\n定位时间:"+e._s(e.formatDatetime(1,1,t.gpstime))),i("br"),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.openCmdView(t)}}},[e._v("设备控制")]),e._v(" "),i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){return e.openMapView(t)}}},[e._v("设备定位")]),i("br")],1)]),e._v(" "),i("td")])}),0),e._v(" "),i("MapView",{ref:"MapView"}),e._v(" "),i("CmdView",{ref:"CmdView"})],1)},staticRenderFns:[]};var l=i("VU/8")(o,r,!1,function(e){i("64ym")},"data-v-750269e5",null);t.default=l.exports},vHsN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("TFOu");var n=i("ow4a"),a={markerType:"pin",markerFill:"#ff0000",markerFillOpacity:.8,markerLineColor:"#ff0000",markerLineWidth:3,markerLineOpacity:1,markerLineDasharray:[],markerWidth:32,markerHeight:32,markerDx:0,markerDy:0,markerOpacity:1},o={name:"AlarmView",props:{},data:function(){return{dialogVisible:!1,center:{lng:116.396621,lat:39.916385},zoom:13}},methods:{openDialog:function(e){var t=this;this.dialogVisible=!0,this.callApi({apicode:1120,lat:e.lat,lng:e.lng},function(i){var o=t.$refs.lingxMap.getMap(),r=new n.k("vector111").addTo(o),l=new n.h([i.lng-0,i.lat-0],{properties:{name:e.id},cursor:"pointer",symbol:[a,{textName:"{name}",textSize:14,textDy:10,textFill:"#004e98",textWeight:"bold"}]});r.addGeometry(l),o.setCenter([i.lng-0,i.lat-0])})},handleClose:function(e){this.dialogVisible=!1}},mounted:function(){},watch:{},components:{LingxMap:i("d2xA").a}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.dialogVisible?i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"地图位置",visible:e.dialogVisible,width:"720px",height:"480px","show-close":"","append-to-body":"","before-close":e.handleClose}},[i("div",{staticStyle:{width:"100%",height:"380px",overflow:"auto","background-color":"#fff"}},[i("LingxMap",{ref:"lingxMap",attrs:{isinfowin:!1,issearch:!1,ispls:!1,zoom:e.zoom,center:e.center}})],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)]):e._e()],1)},staticRenderFns:[]};var l=i("VU/8")(o,r,!1,function(e){i("OJWk")},null,null);t.default=l.exports}});